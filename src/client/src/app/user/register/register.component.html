
<main>

  <section class="form-outer">

    <div class="wrapper">
      <div class="form-wrapper">
        <div class="form-head">
          <h1>Register</h1>
        </div>
        <div class="form-body">
          <form #registerForm="ngForm" appEqualPasswordValidator appUserAvailability (ngSubmit)="loginHandler(registerForm)">
            <div class="form-group">
              <label for="username">Username</label>
              <input #username="ngModel" [(ngModel)]="userModel.username" name="username" type="text"
                     class="form-control" id="username" [ngClass]="{'ng-invalid-availability': registerForm.errors?.usernameNotFree}"
                     placeholder="Enter username(required)" required minlength="5" maxlength="30">

              <div *ngIf="username.errors?.minlength" class="alert alert-danger" role="alert">
                The required min length is {{username.errors.minlength.requiredLength}} symbols

              </div>

              <div *ngIf="registerForm.errors?.usernameNotFree" class="alert alert-danger" role="alert">
                Username is not free

              </div>


            </div>

            <div class="form-group">
              <label for="email">Email</label>
              <input #email="ngModel" [(ngModel)]="userModel.email" name="email" type="email" class="form-control"
                     id="email" [ngClass]="{'ng-invalid-availability': registerForm.errors?.emailNotFree}"
                     placeholder="Enter email" required email>
              <div *ngIf="email.errors?.email" class="alert alert-danger" role="alert">
                The email is not valid

              </div>
              <div *ngIf="registerForm.errors?.emailNotFree" class="alert alert-danger" role="alert">
                The email is not free!

              </div>
            </div>

            <div class="form-group">
              <label for="imageUrl">Image URL</label>
              <input pattern="(^$)|(http(s?):)([/|.|\w|\s|-])*\.(?:jpg|gif|png)" #imageUrl="ngModel" [(ngModel)]="userModel.imageUrl" name="imageUrl" type="text"
                     class="form-control" id="imageUrl"
                     placeholder="Enter Image Url (optional)">
              <div *ngIf="imageUrl.errors?.pattern" class="alert alert-danger" role="alert">
                The image url is not valid!Should start with https:// and ends with jpg|gif|png.

              </div>
            </div>

            <div class="form-group">
              <label for="password">Password</label>
              <input #password="ngModel" [(ngModel)]="userModel.password" name="password" type="password"
                     class="form-control" id="password"
                     placeholder="Password" required minlength="5" maxlength="40">
              <div *ngIf="password.errors?.minlength" class="alert alert-danger" role="alert">
                Your password need to be at least {{password.errors.minlength.requiredLength}} characters long

              </div>
            </div>

            <div class="form-group">
              <label for="rePassword">Confirm password</label>
              <input  [ngClass]="{'ng-invalid-password-match': registerForm.errors?.notMatch}" #rePassword="ngModel" [(ngModel)]="userModel.rePassword" name="rePassword"  type="password"
                     class="form-control" id="rePassword"
                     placeholder="Confirm password" required>


              <div *ngIf="registerForm.errors?.notMatch" class="alert alert-danger" role="alert">
                Passwords doesnt match!

              </div>

            </div>
<!--           -->
            <button   [disabled]="registerForm.invalid"   type="submit" class="btn btn-primary">Submit</button>
          </form>
        </div>

        <div class="form-footer">
          <p>Already registered? Click <a routerLink="/users/login">here</a> to sign in</p>
        </div>
      </div>

    </div>

  </section>


</main>
